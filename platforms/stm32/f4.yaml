- match:
    mem: e
  mem:
    flash:
      origin: 0x08000000
      size: 512k

- match:
    mem: g
  mem:
    flash:
      origin: 0x08000000
      size: 1M

- match:
    mem: i
  mem:
    flash:
      origin: 0x08000000
      size: 2M

- mem:
    ram:
      origin: 0x20000000
      size: 128k

    ccm:
      origin: 0x10000000
      size: 64k

  periph:
    stm32_gpio:
      GPIOA:
        offset: 0x40020000
        type: v2
      GPIOB:
        offset: 0x40020400
        type: v2
      GPIOC:
        offset: 0x40020800
        type: v2
      GPIOD:
        offset: 0x40020c00
        type: v2
      GPIOE:
        offset: 0x40021000
        type: v2
      GPIOF:
        offset: 0x40021400
        type: v2
      GPIOG:
        offset: 0x40021800
        type: v2
      GPIOH:
        offset: 0x40021c00
        type: v2
      GPIOI:
        offset: 0x40022000
        type: v2

    stm32_timer:
      TIM1:
        offset: 0x40010000
      TIM2:
        offset: 0x40000000
      TIM3:
        offset: 0x40000400
      TIM4:
        offset: 0x40000800
      TIM5:
        offset: 0x40000c00
      TIM6:
        offset: 0x40001000
      TIM7:
        offset: 0x40001400
      TIM8:
        offset: 0x40010400

    stm32_uart:
      USART1:
        offset: 0x40011000
        type: v1
      USART2:
        offset: 0x40004400
        type: v1

    stm32_dma:
      DMA1:
        type: v2
        offset: 0x40026000
      DMA2:
        type: v2
        offset: 0x40026400

    dwc_otg:
      OTG_FS:
        offset: 0x50000000
      OTG_HS:
        offset: 0x40040000

    rcc:
      RCC:
        offset: 0x40023800
        type: f4
        bus:
          AHB1:
            0: GPIOA
            1: GPIOB
            2: GPIOC
            3: GPIOD
            4: GPIOE
            5: GPIOF
            6: GPIOG
            7: GPIOH
            8: GPIOI
            12: CRC
            21: DMA1
            22: DMA2
            25: ETHMAC
            26: ETHMACTX
            27: ETHMACRX
            28: ETHMACPTP
            29: OTGHS
            30: OTGHSULPI

          AHB2:
            0: DCMI
            4: CRYP
            5: HASH
            6: RNG
            7: OTGFS

          AHB3:
            0: FSMC

          APB1:
            0: TIM2
            1: TIM3
            2: TIM4
            3: TIM5
            4: TIM6
            5: TIM7
            6: TIM12
            7: TIM13
            8: TIM14
            11: WWDG
            14: SPI2
            15: SPI3
            17: USART2
            18: USART3
            19: UART4
            20: UART5
            21: I2C1
            22: I2C2
            23: I2C3
            25: CAN1
            26: CAN2
            28: PWR
            29: DAC

          APB2:
            0: TIM1
            1: TIM8
            4: USART1
            5: USART6
            8: ADC
            11: SDIO
            12: SPI1
            14: SYSCFG
            16: TIM9
            17: TIM10
            18: TIM11

  interrupt:
    irq:
      0: WWDG
      1: PVD
      2: TAMP_STAMP
      3: RTC_WKUP
      4: FLASH
      5: RCC
      6: EXTI0
      7: EXTI1
      8: EXTI2
      9: EXTI3
      10: EXTI4
      11: DMA1_Stream0
      12: DMA1_Stream1
      13: DMA1_Stream2
      14: DMA1_Stream3
      15: DMA1_Stream4
      16: DMA1_Stream5
      17: DMA1_Stream6
      18: ADC
      19: CAN1_TX
      20: CAN1_RX0
      21: CAN1_RX1
      22: CAN1_SCE
      23: EXTI9_5
      24: TIM1_BRK_TIM9
      25: TIM1_UP_TIM10
      26: TIM1_TRG_COM_TIM11
      27: TIM1_CC
      28: TIM2
      29: TIM3
      30: TIM4
      31: I2C1_EV
      32: I2C1_ER
      33: I2C2_EV
      34: I2C2_ER
      35: SPI1
      36: SPI2
      37: USART1
      38: USART2
      39: USART3
      40: EXTI15_10
      41: RTC_Alarm
      42: OTG_FS_WKUP
      43: TIM8_BRK_TIM12
      44: TIM8_UP_TIM13
      45: TIM8_TRG_COM_TIM14
      46: TIM8_CC
      47: DMA1_Stream7
      48: FSMC
      49: SDIO
      50: TIM5
      51: SPI3
      52: UART4
      53: UART5
      54: TIM6_DAC
      55: TIM7
      56: DMA2_Stream0
      57: DMA2_Stream1
      58: DMA2_Stream2
      59: DMA2_Stream3
      60: DMA2_Stream4
      61: ETH
      62: ETH_WKUP
      63: CAN2_TX
      64: CAN2_RX0
      65: CAN2_RX1
      66: CAN2_SCE
      67: OTG_FS
      68: DMA2_Stream5
      69: DMA2_Stream6
      70: DMA2_Stream7
      71: USART6
      72: I2C3_EV
      73: I2C3_ER
      74: OTG_HS_EP1_OUT
      75: OTG_HS_EP1_IN
      76: OTG_HS_WKUP
      77: OTG_HS
      78: DCMI
      79: CRYP
      80: HASH_RNG
      81: FPU
      82: UART7
      83: UART8
      84: SPI4
      85: SPI5
      86: SPI6
      87: SAI1
      88: LCD_TFT
      89: LCD_TFT_ERR
      90: DMA2D

  define:
    - STM32F4

  meta:
    cpu: cortex-m4f